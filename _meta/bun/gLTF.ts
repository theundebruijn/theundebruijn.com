///////////////////
///// IMPORTS /////
///////////////////

import child_process from "node:child_process";

// NOTE:
// The KTX + Basis UASTC texture compression step is only available through the @gltf-transform/cli
// Hence the need to fork out to a shell process

/////////////////
///// SHELL /////
/////////////////

const pathToExec = "./node_modules/.bin/gltf-transform";
const process = child_process.exec
(
  pathToExec +
  " optimize" +
  " './_blender/theu0000-feathers.gltf'" +
  " './_src/_pages/home/_components/feathers/_assets/theu0000-feathers.glb'" +
  " --compress draco" +
  " --flatten false" +
  " --instance true" +
  " --instance-min 2" +
  " --join false" +
  " --palette false" +
  " --prune true" +
  " --simplify false" +
  " --texture-compress ktx2" +
  " --texture-size 2048" +
  " --weld false",
  function(error, stdout, stderr)
  {
    if (error) {
      console.error(`exec error: ${error}`);
      return;
    }
    console.log(`stdout: ${stdout}`);
  }
);

////////////////////////////////////////////////////////////
//////////////////////////.        /////////////////////////
/////////////////////     .      ..  ...////////////////////
///////////////////    ..  .   ....    .  ./////////////////
//////////////////        . .  . ...  . ... ////////////////
/////////////////     ...................   ////////////////
/////////////////  .(,(/.%,.*%#&&&.//....   ////////////////
/////////////////  .***/..*,*/%,%%#%*/(/(. ,* //////////////
////////////////( ******  #%#((&%%*&///%%*..(.//////////////
/////////////////(/,((//**&.*,%%(*//.**##, .#(//////////////
///////////////( .(,**....* ...,*,,,%&,((*.* .//////////////
///////////////( . **..(*#/ %%%%#,*##,..*%,,.///////////////
////////////////(.,#/%#%%,#(%#(/&&(%,(.//#,..///////////////
//////////////////(,,/*#(.#/ /(&..%/&/(*(.//////////////////
///////////////////( ***#     .,.,/&%%%*.///////////////////
////////////////////(./,/*,,.,&*(((%%(/ ////////////////////
///////////////////////**.*.*//##.*,,,//////////////////////
///////////////////////  ,*%%/@//(*   ./////////////////////
//////////////////////                 /////////////////////
////////////////////                     ///////////////////